# 微信端接口定义

> - 测试环境地址：http://GATEWAY_DOMAIN:30552
> - 默认鉴权请求头：
>
> | 头部名称       | 头部内容                         | 描述                 |
> | -------------- | -------------------------------- | -------------------- |
> | x-access-token | `access token`                   | 用户鉴定access token |
> | Authorization  | `HTTP Basic Auth base64编码信息` | 客户端鉴定token      |
> - 默认响应格式：
>
> | 名称    | 类型      | 描述                                                   |
> | ------- | --------- | ------------------------------------------------------ |
> | status  | `Integer` | 响应状态码，当HTTP响应与此状态码不同时以此状态码为准。 |
> | message | `String`  | 简短提示信息。                                         |
> | data    | `Object`  | 自定义返回结构化数据。                                 |
>

[TOC]

## 获取注册元数据

- 请求格式：GET
- 返回格式：JSON
- 接口名称：`auth/info/user-register`
- 请求参数：
| 参数名     | 必须 | 类型      | 描述                |
| ---------- | ---- | --------- | ------------------- |
| pageOffset | 否   | `Integer` | tag列表分页页码     |
| pageSize   | 否   | `Integer` | tag列表分页每页数量 |

* 备注
  * 无需鉴权；
  * 当没有参数时，接口返回所有tag。

- 返回结果：

```json
{
    "education": [
        "初中以下",
        "初中毕业",
        "高中毕业",
        "本科毕业",
        "研究生及以上"
    ],
    "tags": [
        {
            "id": 1,
            "name": "后厨打杂"
        },
        {
            "id": 3,
            "name": "影院服务员"
        },
        {
            "id": 4,
            "name": "酒店清洁工"
        },
        {
            "id": 2,
            "name": "餐厅服务员"
        },
        {
            "id": 5,
            "name": "全天在岗"
        }
    ]
}
```
- 字段说明：
| 参数名       | 类型                | 描述                                     |
| ------------ | ------------------- | ---------------------------------------- |
| `education` | `List<String>` | 用户可选的所有学历选项                   |
| `tags`       | `List<Pair<Integer, String> >` | 用户可选的所有兴趣tag，属性包括id和名称等 |

## 获取用户信息

* 请求格式：GET
* 返回格式：JSON
* 接口名称：`warehouse/user/info`
* 请求参数：无
* 备注：
  * 用户信息通过鉴权头部提取，故无需提供用户ID参数。
* 返回结果：

```json
{
    "data": {
        "info": {
            "user_id": 1,
            "name": "SJH",
            "gender": true,
            "identity": "310110123456781000",
            "phone": "13812345678",
            "country": "China",
            "city": "Shanghai",
            "education": "primary school"
        }
    },
    "message": "OK",
    "status": 200
}
```

* 字段说明：
| 参数名       | 类型                | 描述                                     |
| ------------ | ------------------- | ---------------------------------------- |
| `info` | `Object` | 用户信息元数据            |

## 更改用户信息

- 请求格式：POST
- 返回格式：JSON
- 接口名称：`warehouse/user/info`
- 请求参数：

| 参数名    | 是否必要 | 参数类型        | 参数描述       |
| --------- | -------- | --------------- | -------------- |
| phone     | 否       | `String`        | 手机号         |
| country   | 否       | `String`        | 国家           |
| city      | 否       | `String`        | 城市           |
| education | 否       | `String`        | 教育经历       |
| tag       | 否       | `List<Integer>` | 感兴趣的标签ID |

- 备注：
  - 用户信息通过鉴权头部提取，故无需提供用户ID参数。
- 返回结果：

```json
{
    "message": "OK",
    "status": 200
}
```

## 获取岗位简略信息


- 请求参数：

   | 参数名         | 类型     | 描述                 |
  | -------------- | -------- | -------------------- |
  | `longitude`    | `Float`  | 用户登录时所在的经度 |
  | `latitude`     | `Float`  | 用户登录时所在的纬度 |
- 返回结果：

  | 参数名 | 类型              | 描述                                                         |
  | ------ | ----------------- | ------------------------------------------------------------ |
  | `status`    | `int`    | 状态码，成功200，失败400 |
  | `jobs` | `List<job> ` | 比较简略的岗位信息，包括岗位名称、岗位描述、岗位需要的技术tags |
  | `message`       | `String` | 请求信息            |

## 获取更多岗位简略信息
- 请求格式：GET
- 返回结果：

  | 参数名 | 类型              | 描述                                                         |
  | ------ | ----------------- | ------------------------------------------------------------ |
  | `status`    | `int`    | 状态码，成功200，失败400 |
  | `jobs` | `List<job> ` | 比较简略的岗位信息，包括岗位名称、岗位描述、岗位需要的技术tags |
  | `message`       | `String` | 请求信息            |



## 获取岗位详细信息
- 传递参数 

| 参数名         | 类型     | 描述      |
| -------------- | -------- | --------- |
| `job_id`       | `int`    | 岗位的id  |

- 返回结果

   | 参数名 | 类型  | 描述              |
  | ------ | ----- | ----------------- |
  | `status`    | `int`    | 状态码，成功200，失败400 |
  | `job`  | `job` | 包括job的所有信息 |
  | `message`       | `String` | 请求信息            |
  
## 发送应聘请求

- 传递参数 

   | 参数名         | 类型     | 描述           |
  | -------------- | -------- | -------------- |
  | `job_id`       | `int`    | 应聘的岗位的id |
- 返回结果

  | 参数名 | 类型  | 描述                 |
  | ------ | ----- | -------------------- |
  | `status`    | `int`    | 状态码，成功200，失败400 |
  | `message`       | `String` | 请求信息            |

## 获取用户当前timeline

- 传递参数 ：无
- 返回结果

  | 参数名 | 类型  | 描述                 |
  | ------ | ----- | -------------------- |
  | `status`    | `int`    | 状态码，成功200，失败400 |
  | `message`       | `String` | 请求信息            |
  | `timeline` | `int[][]` | 4*7的整数二维数组，第一维表示时间段，第二维表示星期 |
  
## 发送修改timeline请求

- 传递参数 ：
  | 参数名         | 类型     | 描述           |
  | -------------- | -------- | -------------- |
  | `timeline` | `int[][]` | 4*7的整数二维数组，第一维表示时间段，第二维表示星期  |
- 返回结果

  | 参数名 | 类型  | 描述                 |
  | ------ | ----- | -------------------- |
  | `status`    | `int`    | 状态码，成功200，失败400 |
  | `message`       | `String` | 请求信息            |